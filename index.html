<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Dashboard Entregas</title>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2"></script>

  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background:#fafafa; }
    h2 { margin: 0 0 14px 0; }

    .row { display:flex; gap:16px; flex-wrap:wrap; align-items:flex-end; margin-top: 12px; }
    .box { background:#fff; border:1px solid #e3e3e3; border-radius:12px; padding:14px; }
    .filter { min-width: 280px; }

    label { font-size: 12px; color:#444; }
    select { width:100%; padding:8px 10px; border-radius:10px; border:1px solid #ddd; }

    .kpi { min-width: 240px; }
    .kpi .title { font-size:12px; color:#666; }
    .kpi .value { font-size:28px; font-weight:800; margin-top:6px; }
    .kpi .sub { font-size:12px; color:#666; margin-top:4px; white-space: nowrap; overflow:hidden; text-overflow: ellipsis; }

    .chartWrap { height: 440px; margin-top: 16px; }
    .hint { font-size:12px; color:#666; margin-top:8px; }

    .error {
      margin-top: 14px; padding: 10px 12px;
      background: #fff3f3; border: 1px solid #ffcccc;
      border-radius: 10px; color:#a40000;
    }
  </style>
</head>

<body>

<h2>CUMPLIMIENTO MENSUAL ACUMULADO</h2>

<!-- Filtros -->
<div class="row">
  <div class="box filter">
    <label for="clienteSelect"><b>CLIENTE</b></label>
    <select id="clienteSelect">
      <option value="">Todos</option>
    </select>
    <div class="hint" id="clienteHint"></div>
  </div>

  <div class="box filter" style="min-width:220px;">
    <label for="mesSelect"><b>Mes</b></label>
    <select id="mesSelect"></select>
    <div class="hint" id="mesHint"></div>
  </div>
</div>

<div id="msg"></div>

<!-- KPIs generales -->
<div class="row">
  <div class="box kpi">
    <div class="title">Cantidad de pedidos</div>
    <div class="value" id="kpiTotal">-</div>
    <div class="sub">AT + FT + No entregados</div>
  </div>

  <div class="box kpi">
    <div class="title">% Entregados AT</div>
    <div class="value" id="kpiATpct">-</div>
    <div class="sub" id="kpiATqty">-</div>
  </div>

  <div class="box kpi">
    <div class="title">% Entregados FT</div>
    <div class="value" id="kpiFTpct">-</div>
    <div class="sub" id="kpiFTqty">-</div>
  </div>

  <div class="box kpi">
    <div class="title">% No entregados</div>
    <div class="value" id="kpiNOpct">-</div>
    <div class="sub" id="kpiNOqty">-</div>
  </div>
</div>

<!-- KPIs mensuales + variación -->
<div class="row">
  <div class="box kpi">
    <div class="title">% ENTREGADOS AT (mes)</div>
    <div class="value" id="kpiATmes">-</div>
    <div class="sub" id="kpiATmesSub">-</div>
  </div>

  <div class="box kpi">
    <div class="title">% ENTREGADOS FT (mes)</div>
    <div class="value" id="kpiFTmes">-</div>
    <div class="sub" id="kpiFTmesSub">-</div>
  </div>

  <div class="box kpi">
    <div class="title">% NO ENTREGADOS (mes)</div>
    <div class="value" id="kpiNOmes">-</div>
    <div class="sub" id="kpiNOmesSub">-</div>
  </div>

  <div class="box kpi">
    <div class="title">% ENTREGADO TOTAL (AT+FT) (mes)</div>
    <div class="value" id="kpiTOTmes">-</div>
    <div class="sub" id="kpiTOTmesSub">-</div>
  </div>
</div>

<!-- Gráfico -->
<div class="box chartWrap">
  <div style="font-weight:700; margin-bottom:8px;">AT / FT / No entregados por mes (100% apilado)</div>
  <canvas id="chartMes"></canvas>
  <div class="hint">
    Etiqueta: <b>cantidad (xx.x%)</b>. Mes = <b>FECHA ENTREGA ESPERADA</b> (dd/mm/aaaa).
  </div>
</div>

<!-- Tu JS -->
<script src="app.js"></script>
</body>
</html>

